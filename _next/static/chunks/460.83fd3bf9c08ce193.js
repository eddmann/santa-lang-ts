!function(){var a,b,c,d,e,f,g,h={3460:function(a,b,c){"use strict";var d,e,f,g,h={};c.r(h),c.d(h,{Err:function(){return L}});var i={};c.r(i),c.d(i,{BreakValue:function(){return Q},BuiltinFunc:function(){return N},Func:function(){return M},PLACEHOLDER:function(){return S},Placeholder:function(){return R},ReturnValue:function(){return P},TailCallFunc:function(){return O}});var j={};c.r(j),c.d(j,{Bool:function(){return T},Decimal:function(){return W},FALSE:function(){return Z},Integer:function(){return V},NIL:function(){return $},Nil:function(){return U},Str:function(){return X},TRUE:function(){return Y}});var k={};c.r(k),c.d(k,{Dictionary:function(){return aa},List:function(){return _},Range:function(){return ac},Sequence:function(){return ad},Set:function(){return ab}});var l={};c.r(l),c.d(l,{Environment:function(){return ae}});var m={};c.r(m),c.d(m,{Section:function(){return af}});var n={};c.r(n);var o,p=c(828),q=c(9815),r=c(2670),s=c(1438);(o=d||(d={})).Illegal="ILLEGAL",o.EOF="EOF",o.Identifier="IDENTIFIER",o.Integer="INTEGER",o.Decimal="DECIMAL",o.Str="STRING",o.Comment="COMMENT",o.Assign="=",o.Plus="+",o.Minus="-",o.Bang="!",o.Asterisk="*",o.Slash="/",o.Modulo="%",o.LessThan="<",o.LessThanEqual="<=",o.GreaterThan=">",o.GreaterThanEqual=">=",o.Equal="==",o.NotEqual="!=",o.Comma=",",o.Semicolon=";",o.Colon=":",o.LParen="(",o.RParen=")",o.LBrace="{",o.HashLBrace="#{",o.RBrace="}",o.LBracket="[",o.RBracket="]",o.Underscore="_",o.Dot=".",o.DotDot="..",o.DotDotEqual="..=",o.Backtick="`",o.At="@",o.Hash="#",o.Pipe="|",o.PipePipe="||",o.Amp="&",o.AmpAmp="&&",o.PipeGreater="|>",o.GreaterGreater=">>",o.Mutable="MUTABLE",o.Match="MATCH",o.Let="LET",o.True="TRUE",o.False="FALSE",o.If="IF",o.Else="ELSE",o.Return="RETURN",o.Break="BREAK",o.Nil="NIL";var t,u,v={let:d.Let,mut:d.Mutable,true:d.True,false:d.False,if:d.If,else:d.Else,return:d.Return,break:d.Break,match:d.Match,nil:d.Nil},w=function(){function a(b){(0,s.Z)(this,a),this.source=b,this.position=-1,this.char=null,this.line=0,this.column=0,this.isLetter=function(a){return null!==a&&"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(a)},this.isLetterOrDigit=function(a){return null!==a&&"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_!?".includes(a)},this.isDigit=function(a){return null!==a&&"0123456789".includes(a)},this.readChar()}var b=a.prototype;return b.nextToken=function(){this.skipWhitespace();var a=this.parseToken();return this.readChar(),a},b.readAll=function(){for(var a=[this.nextToken()],b=a[0];b.kind!==d.EOF;)a.push(b=this.nextToken());return a},b.parseToken=function(){switch(this.char){case d.Assign:if(this.peekChar()===d.Assign)return this.readChar(),this.createToken(d.Equal,d.Equal);return this.createToken(d.Assign);case d.Plus:return this.createToken(d.Plus);case d.Minus:return this.createToken(d.Minus);case d.Bang:if(this.peekChar()===d.Assign)return this.readChar(),this.createToken(d.NotEqual,d.NotEqual);return this.createToken(d.Bang);case d.Asterisk:return this.createToken(d.Asterisk);case d.Slash:if(this.peekChar()===d.Slash)return this.readChar(),this.createToken(d.Comment,this.readComment());return this.createToken(d.Slash);case d.Modulo:return this.createToken(d.Modulo);case d.LessThan:if(this.peekChar()==d.Assign)return this.readChar(),this.createToken(d.LessThanEqual,d.LessThanEqual);return this.createToken(d.LessThan);case d.GreaterThan:if(this.peekChar()==d.Assign)return this.readChar(),this.createToken(d.GreaterThanEqual,d.GreaterThanEqual);if(this.peekChar()===d.GreaterThan)return this.readChar(),this.createToken(d.GreaterGreater,d.GreaterGreater);return this.createToken(d.GreaterThan);case d.Comma:return this.createToken(d.Comma);case d.Semicolon:return this.createToken(d.Semicolon);case d.Colon:return this.createToken(d.Colon);case d.LParen:return this.createToken(d.LParen);case d.RParen:return this.createToken(d.RParen);case d.LBrace:return this.createToken(d.LBrace);case d.RBrace:return this.createToken(d.RBrace);case d.At:return this.createToken(d.At);case d.Hash:if(this.peekChar()===d.LBrace)return this.readChar(),this.createToken(d.HashLBrace,d.HashLBrace);return this.createToken(d.Hash);case d.LBracket:return this.createToken(d.LBracket);case d.RBracket:return this.createToken(d.RBracket);case d.Underscore:return this.createToken(d.Underscore);case d.Dot:if(this.peekChar()===d.Dot){if(this.readChar(),this.peekChar()===d.Assign)return this.readChar(),this.createToken(d.DotDotEqual,d.DotDotEqual);return this.createToken(d.DotDot,d.DotDot)}return this.createToken(d.Dot);case d.Backtick:return this.createToken(d.Backtick);case d.Pipe:if(this.peekChar()===d.Pipe)return this.readChar(),this.createToken(d.PipePipe,d.PipePipe);if(this.peekChar()===d.GreaterThan)return this.readChar(),this.createToken(d.PipeGreater,d.PipeGreater);return this.createToken(d.Pipe);case d.Amp:if(this.peekChar()===d.Amp)return this.readChar(),this.createToken(d.AmpAmp,d.AmpAmp);return this.createToken(d.Amp);case'"':return this.createToken(d.Str,this.readString());case null:return this.createToken(d.EOF,"");default:if(this.isLetter(this.char)){var a=this.readIdentifier();return this.createToken(v[a]||d.Identifier,a)}if(this.isDigit(this.char))return this.readNumberToken();return this.createToken(d.Illegal)}},b.createToken=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:null,c=null===b?this.char||"":b;return{kind:a,literal:c,line:this.line,column:this.column-c.length}},b.readIdentifier=function(){for(var a=this.char||"";this.isLetterOrDigit(this.peekChar());)this.readChar(),a+=this.char;return a},b.readString=function(){this.readChar();for(var a="";this.char&&'"'!==this.char;)a+="\\"===this.char?this.readEscapeChar():this.char,this.readChar();return a},b.readEscapeChar=function(){switch(this.readChar(),this.char){case"b":return"\b";case"f":return"\f";case"r":return"\r";case"n":return"\n";case"t":return"	";case"\\":return"\\";case'"':return'"';default:throw Error("Invalid escape character")}},b.readNumberToken=function(){for(var a=this.position,b=!1;this.isDigit(this.peekChar())||this.peekChar()===d.Dot||this.peekChar()===d.Underscore;){if(this.char===d.Dot){if(this.peekChar()==d.Dot)return this.position-=1,this.createToken(d.Integer,this.source.slice(a,this.position+1));b=!0}this.readChar()}return this.createToken(b?d.Decimal:d.Integer,this.source.slice(a,this.position+1))},b.readComment=function(){this.readChar();for(var a=this.position;this.peekChar()&&"\n"!==this.peekChar()&&"\r"!==this.peekChar();)this.readChar();return this.source.slice(a,this.position+1)},b.readChar=function(){var a=this.position+1;if(a>=this.source.length){this.char=null;return}this.char=this.source[a],this.position=a,this.column+=1,("\n"===this.char||"\r"===this.char)&&(this.line+=1,this.column=0)},b.peekChar=function(){var a=this.position+1;return a<this.source.length?this.source[a]:null},b.skipWhitespace=function(){for(;" "===this.char||"	"===this.char||"\n"===this.char||"\r"===this.char;)this.readChar()},a}(),x=c(4111),y=c(4924),z=c(8668),A=c(5892),B=c(6626);(t=e||(e={})).Program="PROGRAM",t.Assignment="ASSIGNMENT",t.Let="LET",t.Return="RETURN",t.Break="BREAK",t.BlockStatement="BLOCK_STATEMENT",t.Section="SECTION",t.Identifier="IDENTIFIER",t.IdentifierListDestructure="IDENTIFIER_LIST_DESTRUCTURE",t.IfExpression="IF_EXPRESSION",t.MatchExpression="MATCH_EXPRESSION",t.Integer="INTEGER",t.Decimal="DECIMAL",t.Placeholder="PLACEHOLDER",t.Nil="NIL",t.Str="STRING",t.Bool="BOOLEAN",t.CommentStatement="COMMENT",t.FunctionLiteral="FUNCTION_LITERAL",t.CallExpression="CALL_EXPRESSION",t.IndexExpression="INDEX_EXPRESSION",t.PrefixExpression="PREFIX_EXPRESSION",t.InfixExpression="INFIX_EXPRESSION",t.ExpressionStatement="EXPRESSION",t.DictionaryExpression="DICTIONARY_EXPRESSION",t.ListExpression="LIST_EXPRESSION",t.SetExpression="SET_EXPRESSION",t.RangeExpression="RANGE_EXPRESSION",t.ListDestructurePattern="LIST_DESTRUCTURE_PATTERN",t.ListMatchPattern="LIST_MATCH_PATTERN",t.RestElement="REST_ELEMENT",t.SpreadElement="SPREAD_ELEMENT",t.FunctionThread="FUNCTION_THEAD",t.FunctionComposition="FUNCTION_COMPOSITON",(u=f||(f={}))[u.Lowest=0]="Lowest",u[u.AndOr=1]="AndOr",u[u.Equals=2]="Equals",u[u.Identifier=3]="Identifier",u[u.LessGreater=4]="LessGreater",u[u.Composition=5]="Composition",u[u.Sum=6]="Sum",u[u.Product=7]="Product",u[u.Call=8]="Call",u[u.Prefix=9]="Prefix",u[u.Index=10]="Index";var C=function(a){(0,z.Z)(c,a);var b=(0,B.Z)(c);function c(a,d){var e;return(0,s.Z)(this,c),(e=b.call(this,a)).token=d,Object.setPrototypeOf((0,x.Z)(e),c.prototype),e}return c}((0,A.Z)(Error)),D=function(){function a(b){var c,g=this;(0,s.Z)(this,a),this.lexer=b,this.parsePrefixExpression=function(){var a=g.captureSourceLocation(),b=g.parseIdentifier();return g.nextToken(),{kind:e.PrefixExpression,function:{kind:e.Identifier,value:"unary_".concat(b.value),source:g.captureSourceLocation()},argument:g.parseExpression(f.Product),source:a}},this.parseInfixExpression=function(a){var b,c=g.captureSourceLocation(),f=g.getPrecedence(g.curToken);g.curTokenIs(d.Backtick)?(g.nextToken(),b=g.parseIdentifier(),g.expectPeek(d.Backtick)):b=g.parseIdentifier(),g.nextToken();var h=g.parseExpression(f);return{kind:e.InfixExpression,function:b,arguments:[a,h],source:c}},this.parseAssignment=function(a){if(a.kind!==e.Identifier)throw new C("Expected token to be ".concat(d.Identifier,", but received ").concat(a.kind),g.curToken);var b=g.captureSourceLocation();return g.nextToken(),{kind:e.Assignment,name:a,value:g.parseExpression(f.Lowest),source:b}},this.parseGroupedExpression=function(){g.nextToken();var a=g.parseExpression(f.Lowest);return g.expectPeek(d.RParen),a},this.parseCallExpression=function(a){if(!g.isCallable(a))throw new C("Invocation expected CALLABLE, but received ".concat(a.kind),g.curToken);var b=g.captureSourceLocation(),c={kind:e.CallExpression,function:a,arguments:g.parseExpressionList(d.RParen),source:b};return g.peekTokenIs(d.Pipe)&&(g.nextToken(),c.arguments.push(g.parseFunctionLiteral())),c},this.parseIfExpression=function(){var a,b=g.captureSourceLocation();g.nextToken(),a=g.curTokenIs(d.Let)?g.parseLetStatement():g.parseExpression(f.Lowest),g.expectPeek(d.LBrace);var c=g.parseBlockStatement();return g.peekTokenIs(d.Else)?(g.nextToken(),g.peekTokenIs(d.If))?(g.nextToken(),{kind:e.IfExpression,condition:a,consequence:c,alternative:{kind:e.BlockStatement,statements:[{kind:e.ExpressionStatement,expression:g.parseIfExpression(),source:b},],source:b},source:b}):(g.expectPeek(d.LBrace),{kind:e.IfExpression,condition:a,consequence:c,alternative:g.parseBlockStatement(),source:b}):{kind:e.IfExpression,condition:a,consequence:c,alternative:null,source:b}},this.parseIndexExpression=function(a){var b=g.captureSourceLocation();g.nextToken();var c=g.parseExpression(f.Lowest);return g.expectPeek(d.RBracket),{kind:e.IndexExpression,item:a,index:c,source:b}},this.parseMatchListPattern=function(){var a=g.captureSourceLocation();if(g.nextToken(),g.curTokenIs(d.RBracket))return{kind:e.ListMatchPattern,elements:[],source:a};for(var b=[g.parseMatchPattern()];g.peekTokenIs(d.Comma);)g.nextToken(),g.nextToken(),b.push(g.parseMatchPattern());return g.expectPeek(d.RBracket),{kind:e.ListMatchPattern,elements:b,source:a}},this.parseMatchPattern=function(){var a,b=(a={},(0,y.Z)(a,d.Identifier,g.parseIdentifier),(0,y.Z)(a,d.True,g.parseBooleon),(0,y.Z)(a,d.False,g.parseBooleon),(0,y.Z)(a,d.Integer,function(){var a=g.parseInteger();if(!g.peekTokenIs(d.DotDot))return a;g.nextToken();var b={kind:e.Integer,value:1/0,source:g.captureSourceLocation()};return g.peekTokenIs(d.Integer)&&(g.nextToken(),b=g.parseInteger()),{kind:e.RangeExpression,start:a,end:b,source:g.captureSourceLocation()}}),(0,y.Z)(a,d.Decimal,g.parseDecimal),(0,y.Z)(a,d.Str,g.parseString),(0,y.Z)(a,d.Underscore,g.parsePlaceholder),(0,y.Z)(a,d.LBracket,g.parseMatchListPattern),(0,y.Z)(a,d.Minus,function(){g.nextToken();var a=g.parseMatchPattern();return("INTEGER"===a.kind||"DECIMAL"===a.kind)&&(a.value=-a.value),a}),(0,y.Z)(a,d.DotDot,function(){return g.nextToken(),{kind:e.RestElement,argument:{kind:e.Identifier,value:g.curToken.literal},source:g.captureSourceLocation()}}),a);if(b[g.curToken.kind])return b[g.curToken.kind]();throw new C("Unable to use ".concat(g.curToken.kind," within a match pattern"),g.curToken)},this.parseMatchExpression=function(){var a=g.captureSourceLocation();g.nextToken();var b=g.parseExpression(f.Lowest);g.expectPeek(d.LBrace),g.nextToken();for(var c=[];!g.curTokenIs(d.RBrace);){if(g.curTokenIs(d.Comment)){g.nextToken();continue}var h=g.parseMatchPattern(),i=null;g.peekTokenIs(d.If)&&(g.nextToken(),g.nextToken(),i=g.parseExpression(f.Lowest)),g.expectPeek(d.LBrace);var j=g.parseBlockStatement();g.peekTokenIs(d.Comma)&&g.nextToken(),g.nextToken(),c.push({pattern:h,guard:i,consequence:j})}return g.peekTokenIs(d.Semicolon)&&g.nextToken(),{kind:e.MatchExpression,subject:b,cases:c,source:a}},this.parseIdentifier=function(){var a={kind:e.Identifier,value:g.curToken.literal,source:g.captureSourceLocation()};if(g.peekTokenIs(d.Pipe)){g.nextToken();var b=g.captureSourceLocation();return{kind:e.CallExpression,function:a,arguments:[g.parseFunctionLiteral()],source:b}}return a},this.parseBooleon=function(){return{kind:e.Bool,value:g.curToken.kind===d.True,source:g.captureSourceLocation()}},this.parseInteger=function(){return{kind:e.Integer,value:parseInt(g.curToken.literal.replace(RegExp(d.Underscore,"g"),""),10),source:g.captureSourceLocation()}},this.parseDecimal=function(){return{kind:e.Decimal,value:parseFloat(g.curToken.literal.replace(RegExp(d.Underscore,"g"),"")),source:g.captureSourceLocation()}},this.parseString=function(){return{kind:e.Str,value:g.curToken.literal,source:g.captureSourceLocation()}},this.parsePlaceholder=function(){return{kind:e.Placeholder,source:g.captureSourceLocation()}},this.parseNil=function(){return{kind:e.Nil,source:g.captureSourceLocation()}},this.parseComment=function(){return{kind:e.CommentStatement,value:g.curToken.literal,source:g.captureSourceLocation()}},this.parseFunctionLiteral=function(){var a=g.captureSourceLocation(),b=g.curTokenIs(d.PipePipe)?[]:g.parseFunctionParameters(d.Pipe);g.nextToken();var c=g.curTokenIs(d.LBrace)?g.parseBlockStatement():{kind:e.BlockStatement,statements:[g.parseExpressionStatement()]};return{kind:e.FunctionLiteral,parameters:b,body:c,source:a}},this.parseDictionaryExpression=function(){for(var a=g.captureSourceLocation(),b=[];!g.peekTokenIs(d.RBrace);){if(g.nextToken(),g.curToken.kind===d.Identifier&&!g.peekTokenIs(d.Colon)){b.push([g.parseString(),g.parseIdentifier()]),g.peekTokenIs(d.RBrace)||g.expectPeek(d.Comma);continue}var c=g.parseExpression(f.Lowest);g.expectPeek(d.Colon),g.nextToken(),b.push([c,g.parseExpression(f.Lowest)]),g.peekTokenIs(d.RBrace)||g.expectPeek(d.Comma)}return g.expectPeek(d.RBrace),{kind:e.DictionaryExpression,pairs:b,source:a}},this.parseListExpression=function(){var a=g.captureSourceLocation();return{kind:e.ListExpression,elements:g.parseExpressionList(d.RBracket),source:a}},this.parseSetExpression=function(){var a=g.captureSourceLocation();return{kind:e.SetExpression,elements:g.parseExpressionList(d.RBrace),source:a}},this.parseListDestructurePattern=function(){var a=g.captureSourceLocation();return{kind:e.ListDestructurePattern,elements:g.parseFunctionParameters(d.RBracket),source:a}},this.parseExclusiveRangeExpression=function(a){if(!g.peekTokenIs(d.Identifier)&&!g.peekTokenIs(d.Integer)&&!g.peekTokenIs(d.LParen)&&!g.peekTokenIs(d.Minus))return{kind:e.RangeExpression,start:a,end:{kind:e.Integer,value:1/0,source:g.captureSourceLocation()},isInclusive:!1,source:g.captureSourceLocation()};var b=g.captureSourceLocation();return g.nextToken(),{kind:e.RangeExpression,start:a,end:g.parseExpression(f.Composition),isInclusive:!1,source:b}},this.parseInclusiveRangeExpression=function(a){var b=g.captureSourceLocation();return g.nextToken(),{kind:e.RangeExpression,start:a,end:g.parseExpression(f.Composition),isInclusive:!0,source:b}},this.parseFunctionParameters=function(a){if(g.peekTokenIs(a))return g.nextToken(),[];g.nextToken();for(var b=[g.parseFunctionParameter()];g.peekTokenIs(d.Comma);)g.nextToken(),g.nextToken(),b.push(g.parseFunctionParameter());return g.expectPeek(a),b},this.parseFunctionParameter=function(){if(g.curTokenIs(d.LBracket))return g.parseListDestructurePattern();if(g.curTokenIs(d.DotDot)){var a=g.captureSourceLocation();return g.nextToken(),{kind:e.RestElement,argument:{kind:e.Identifier,value:g.curToken.literal,source:a},source:a}}return g.curToken.kind===d.Underscore?{kind:e.Placeholder,source:g.captureSourceLocation()}:{kind:e.Identifier,value:g.curToken.literal,source:g.captureSourceLocation()}},this.parseFunctionThread=function(a){for(var b=g.captureSourceLocation(),c=[g.parseCallable()];g.peekTokenIs(d.PipeGreater);)g.nextToken(),c.push(g.parseCallable());return{kind:e.FunctionThread,initial:a,functions:c,source:b}},this.parseFunctionComposition=function(a){if(!g.isCallable(a))throw new C("Expected callable, but received ".concat(a.kind),g.curToken);for(var b=g.captureSourceLocation(),c=[a,g.parseCallable()];g.peekTokenIs(d.GreaterGreater);)g.nextToken(),c.push(g.parseCallable());return g.peekTokenIs(d.Semicolon)&&g.nextToken(),{kind:e.FunctionComposition,functions:c,source:b}},this.parseCallable=function(){g.nextToken();var a=g.parseExpression(f.Composition);if(!g.isCallable(a))throw new C("Expected callable, but received ".concat(a.kind),g.curToken);return a},this.isCallable=function(a){return a.kind===e.Identifier||a.kind===e.FunctionLiteral||a.kind===e.CallExpression||a.kind===e.InfixExpression||a.kind===e.PrefixExpression||a.kind===e.IndexExpression||a.kind===e.FunctionComposition},this.captureSourceLocation=function(){return{line:g.curToken.line,column:g.curToken.column}},this.expressionParser=(c={},(0,y.Z)(c,d.Match,{precedence:f.Identifier,prefix:this.parseMatchExpression}),(0,y.Z)(c,d.Identifier,{precedence:f.Identifier,prefix:function(){return g.parseIdentifier()}}),(0,y.Z)(c,d.True,{precedence:f.Identifier,prefix:this.parseBooleon}),(0,y.Z)(c,d.False,{precedence:f.Identifier,prefix:this.parseBooleon}),(0,y.Z)(c,d.Integer,{precedence:f.Identifier,prefix:this.parseInteger}),(0,y.Z)(c,d.Decimal,{precedence:f.Identifier,prefix:this.parseDecimal}),(0,y.Z)(c,d.Str,{precedence:f.Identifier,prefix:this.parseString}),(0,y.Z)(c,d.Underscore,{precedence:f.Identifier,prefix:this.parsePlaceholder}),(0,y.Z)(c,d.Nil,{precedence:f.Identifier,prefix:this.parseNil}),(0,y.Z)(c,d.DotDot,{precedence:f.Composition,prefix:this.parseIdentifier,infix:this.parseExclusiveRangeExpression}),(0,y.Z)(c,d.DotDotEqual,{precedence:f.Composition,prefix:this.parseIdentifier,infix:this.parseInclusiveRangeExpression}),(0,y.Z)(c,d.Bang,{precedence:f.Equals,prefix:this.parsePrefixExpression}),(0,y.Z)(c,d.Plus,{precedence:f.Sum,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.Minus,{precedence:f.Sum,prefix:this.parsePrefixExpression,infix:this.parseInfixExpression}),(0,y.Z)(c,d.Asterisk,{precedence:f.Product,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.Slash,{precedence:f.Product,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.Modulo,{precedence:f.Product,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.Equal,{precedence:f.Equals,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.NotEqual,{precedence:f.Equals,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.LessThan,{precedence:f.LessGreater,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.LessThanEqual,{precedence:f.LessGreater,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.GreaterThanEqual,{precedence:f.LessGreater,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.GreaterThan,{precedence:f.LessGreater,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.AmpAmp,{precedence:f.AndOr,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.Pipe,{precedence:f.Identifier,prefix:this.parseFunctionLiteral}),(0,y.Z)(c,d.PipePipe,{precedence:f.AndOr,prefix:this.parseFunctionLiteral,infix:this.parseInfixExpression}),(0,y.Z)(c,d.PipeGreater,{precedence:f.Composition,prefix:this.parseIdentifier,infix:this.parseFunctionThread}),(0,y.Z)(c,d.GreaterGreater,{precedence:f.Composition,prefix:this.parseIdentifier,infix:this.parseFunctionComposition}),(0,y.Z)(c,d.LParen,{precedence:f.Call,prefix:this.parseGroupedExpression,infix:this.parseCallExpression}),(0,y.Z)(c,d.Backtick,{precedence:f.Product,prefix:this.parseIdentifier,infix:this.parseInfixExpression}),(0,y.Z)(c,d.If,{precedence:f.Identifier,prefix:this.parseIfExpression}),(0,y.Z)(c,d.HashLBrace,{precedence:f.Lowest,prefix:this.parseDictionaryExpression}),(0,y.Z)(c,d.LBrace,{precedence:f.Lowest,prefix:this.parseSetExpression}),(0,y.Z)(c,d.LBracket,{precedence:f.Index,prefix:this.parseListExpression,infix:this.parseIndexExpression}),(0,y.Z)(c,d.Assign,{precedence:f.Equals,prefix:this.parseIdentifier,infix:this.parseAssignment}),c),this.curToken=this.lexer.nextToken(),this.peekToken=this.lexer.nextToken()}var b=a.prototype;return b.parse=function(){for(var a=this.captureSourceLocation(),b=[];this.curToken.kind!==d.EOF;)b.push(this.parseStatement()),this.nextToken();return{kind:e.Program,statements:b,source:a}},b.parseStatement=function(){var a=this.parseAttributes();switch(this.curToken.kind){case d.Let:if(a.length>0)throw new C("Unexpected attribute - attributes can only be applied to sections",this.curToken);return this.parseLetStatement();case d.Return:if(a.length>0)throw new C("Unexpected attribute - attributes can only be applied to sections",this.curToken);return this.parseReturnStatement();case d.Break:if(a.length>0)throw new C("Unexpected attribute - attributes can only be applied to sections",this.curToken);return this.parseBreakStatement();case d.Comment:if(a.length>0)throw new C("Unexpected attribute - attributes can only be applied to sections",this.curToken);return this.parseComment();case d.Identifier:if(this.peekTokenIs(d.Colon))return this.parseSectionStatement(a);default:if(a.length>0)throw new C("Unexpected attribute - attributes can only be applied to sections",this.curToken);return this.parseExpressionStatement()}},b.parseAttributes=function(){for(var a=[];this.curTokenIs(d.At);){var b=this.captureSourceLocation();if(this.nextToken(),!this.curTokenIs(d.Identifier))throw new C("Expected identifier after @, but received ".concat(this.curToken.kind),this.curToken);a.push({name:this.curToken.literal,source:b}),this.nextToken()}return a},b.parseLetStatement=function(){var a,b=this.captureSourceLocation(),c=this.peekTokenIs(d.Mutable);if(c&&this.nextToken(),this.nextToken(),this.curTokenIs(d.Identifier))a=this.parseIdentifier();else if(this.curTokenIs(d.LBracket))a=this.parseListDestructurePattern();else throw new C("Expected token to be ".concat(d.Identifier," or ").concat(d.LBracket,", but received ").concat(this.curToken.kind),this.curToken);this.expectPeek(d.Assign),this.nextToken();var g=this.parseExpression(f.Lowest);return this.peekTokenIs(d.Semicolon)&&this.nextToken(),{kind:e.Let,name:a,value:g,isMutable:c,source:b}},b.parseReturnStatement=function(){var a=this.captureSourceLocation();this.nextToken();var b=this.parseExpression(f.Lowest);return this.peekTokenIs(d.Semicolon)&&this.nextToken(),{kind:e.Return,returnValue:b,source:a}},b.parseBreakStatement=function(){var a=this.captureSourceLocation();this.nextToken();var b=this.expressionParser[this.curToken.kind]?this.parseExpression(f.Lowest):null;return this.peekTokenIs(d.Semicolon)&&this.nextToken(),{kind:e.Break,value:b,source:a}},b.parseSectionStatement=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[],b=this.captureSourceLocation(),c=this.parseIdentifier();this.nextToken(),this.nextToken();var f=this.curTokenIs(d.LBrace)?this.parseBlockStatement():{kind:e.BlockStatement,statements:[this.parseExpressionStatement()],source:this.captureSourceLocation()};return this.peekTokenIs(d.Semicolon)&&this.nextToken(),{kind:e.Section,name:c,section:f,attributes:a,source:b}},b.parseBlockStatement=function(){var a=this.captureSourceLocation(),b=[];for(this.nextToken();!this.curTokenIs(d.RBrace)&&!this.curTokenIs(d.EOF);)b.push(this.parseStatement()),this.nextToken();return{kind:e.BlockStatement,statements:b,source:a}},b.parseExpressionStatement=function(){var a=this.captureSourceLocation(),b=this.parseExpression(f.Lowest);return this.peekTokenIs(d.Semicolon)&&this.nextToken(),{kind:e.ExpressionStatement,expression:b,source:a}},b.parseExpression=function(a){var b=this.expressionParser[this.curToken.kind];if(!b)throw new C("Unknown use of ".concat(this.curToken.kind," as an expression"),this.curToken);for(var c=b.prefix();!this.peekTokenIs(d.Semicolon)&&a<this.getPrecedence(this.peekToken);){var e=this.expressionParser[this.peekToken.kind];if(!e||!e.infix)break;this.nextToken(),c=e.infix(c)}return c},b.parseExpressionList=function(a){if(this.peekTokenIs(a))return this.nextToken(),[];this.nextToken();var b=[];if(this.curTokenIs(d.DotDot)){var c=this.captureSourceLocation();this.nextToken(),b.push({kind:e.SpreadElement,value:this.parseExpression(f.Lowest),source:c})}else b.push(this.parseExpression(f.Lowest));for(;this.peekTokenIs(d.Comma);){if(this.nextToken(),this.nextToken(),this.curTokenIs(d.DotDot)){var g=this.captureSourceLocation();this.nextToken(),b.push({kind:e.SpreadElement,value:this.parseExpression(f.Lowest),source:g});continue}b.push(this.parseExpression(f.Lowest))}return this.expectPeek(a),b},b.nextToken=function(){this.curToken=this.peekToken,this.peekToken=this.lexer.nextToken()},b.curTokenIs=function(a){return this.curToken.kind===a},b.peekTokenIs=function(a){return this.peekToken.kind===a},b.expectPeek=function(a){if(!this.peekTokenIs(a))throw new C("Expected next token to be ".concat(a,", but received ").concat(this.peekToken.kind),this.peekToken);this.nextToken()},b.getPrecedence=function(a){var b;return(null===(b=this.expressionParser[a.kind])|| void 0===b?void 0:b.precedence)||f.Lowest},a}();function E(a){switch(a.kind){case ASTKind.ListExpression:return"[".concat(a.elements.map(E).join(", "),"]");case ASTKind.SetExpression:return"{".concat(a.elements.map(E).join(", "),"}");case ASTKind.BlockStatement:return a.statements.map(E).join("\n");case ASTKind.Bool:return String(a.value);case ASTKind.CallExpression:var b=a.arguments.map(E).join(", ");return"".concat(E(a.function),"(").concat(b,")");case ASTKind.InfixExpression:if("abcdefghijklmnopqrstuvwxyz".includes(a.function.value[0]))return"(".concat(E(a.arguments[0])," `").concat(E(a.function),"` ").concat(E(a.arguments[1]),")");return"(".concat(E(a.arguments[0])," ").concat(E(a.function)," ").concat(E(a.arguments[1]),")");case ASTKind.PrefixExpression:return"".concat(a.function.value.replace("unary_","")).concat(E(a.argument));case ASTKind.ExpressionStatement:return E(a.expression)+";";case ASTKind.FunctionLiteral:var c=a.parameters.map(E).join(", ");return"|".concat(c,"| {\n  ").concat(E(a.body),"\n}");case ASTKind.DictionaryExpression:return G(a);case ASTKind.Identifier:return a.value;case ASTKind.IfExpression:return F(a);case ASTKind.Integer:case ASTKind.Decimal:return String(a.value);case ASTKind.IndexExpression:return"(".concat(E(a.item),"[").concat(E(a.index),"])");case ASTKind.Let:return"let ".concat(a.isMutable?"mut ":"").concat(E(a.name)," = ").concat(E(a.value),";");case ASTKind.Program:return a.statements.map(E).join("\n");case ASTKind.Return:return"return ".concat(E(a.returnValue),";");case ASTKind.Str:return'"'.concat(a.value,'"');case ASTKind.FunctionThread:var d=E(a.initial),e=a.functions.map(E).join(" |> ");return"".concat(d," |> ").concat(e);case ASTKind.IndexExpression:return"";case ASTKind.Placeholder:return"_";default:throw Error("Unknown AST node type ".concat(a.kind))}}function F(a){var b=a.condition,c=a.consequence,d=a.alternative,e=d?" else {\n  ".concat(E(d),"\n}"):"";return"if ".concat(E(b)," {\n  ").concat(E(c),"\n}")+e}function G(a){for(var b=[],c=0;c<a.pairs.length;c+=2)b.push("".concat(E(a.pairs[c]),": ").concat(E(a.pairs[c+1])));return"#{".concat(b.join(", "),"}")}var H=c(6042),I=c(4051),J=c.n(I),K=c(3374),L=function(){function a(b,c){(0,s.Z)(this,a),this.message=b,this.node=c}var b=a.prototype;return b.inspect=function(){return"Runtime error: ".concat(this.message)},b.isTruthy=function(){return!0},b.getName=function(){return"Err"},a}(),M=function(){function a(b,c,d){(0,s.Z)(this,a),this.parameters=b,this.body=c,this.environment=d}var b=a.prototype;return b.inspect=function(){var a=this.parameters.map(function(a){return a.value}).join(", ");return"|".concat(a,"| {…}")},b.isTruthy=function(){return!0},b.getName=function(){return"Func"},a}(),N=function(){function a(b,c,d){(0,s.Z)(this,a),this.parameters=b,this.body=c,this.environment=d}var b=a.prototype;return b.inspect=function(){var a=this.parameters.map(function(a){return a.value}).join(", ");return"|".concat(a,"| {…}")},b.isTruthy=function(){return!0},b.getName=function(){return"BuiltinFn"},a}(),O=function(){function a(b,c,d){(0,s.Z)(this,a),this.parameters=b,this.body=c,this.environment=d}var b=a.prototype;return b.inspect=function(){var a=this.parameters.map(function(a){return a.value}).join(", ");return"|".concat(a,"| {…}")},b.isTruthy=function(){return!0},b.getName=function(){return"TailCallFn"},a}(),P=function(){function a(b){(0,s.Z)(this,a),this.value=b}var b=a.prototype;return b.inspect=function(){return this.value.inspect()},b.isTruthy=function(){return!0},b.getName=function(){return"ReturnValue"},a}(),Q=function(){function a(b){(0,s.Z)(this,a),this.value=b}var b=a.prototype;return b.inspect=function(){return this.value.inspect()},b.isTruthy=function(){return!0},b.getName=function(){return"Break"},a}(),R=function(){function a(){(0,s.Z)(this,a)}var b=a.prototype;return b.inspect=function(){return"_"},b.hashCode=function(){return K.ZP.hash("_")},b.equals=function(b){return(0,r.Z)(b,a)},b.isTruthy=function(){return!0},b.getName=function(){return"Placeholder"},a}(),S=new R,T=function(){function a(b){(0,s.Z)(this,a),this.value=b}var b=a.prototype;return b.inspect=function(){return this.value.toString()},b.isTruthy=function(){return this.value},b.getName=function(){return"Bool"},b.hashCode=function(){return K.ZP.hash(this.value)},b.equals=function(b){return(0,r.Z)(b,a)&&this.value===b.value},a.parse=function(b){return(0,r.Z)(b,a)?b:new a(b.isTruthy())},a}(),U=function(){function a(){(0,s.Z)(this,a)}var b=a.prototype;return b.inspect=function(){return"nil"},b.hashCode=function(){return K.ZP.hash(null)},b.equals=function(b){return(0,r.Z)(b,a)},b.isTruthy=function(){return!1},b.getName=function(){return"Nil"},a}(),V=function(){function a(b){(0,s.Z)(this,a),this.value=b}var b=a.prototype;return b.bitAnd=function(b){if(!(0,r.Z)(b,a))throw Error("Operation only permitted for Integer values");return new a(this.value&b.value)},b.bitOr=function(b){if(!(0,r.Z)(b,a))throw Error("Operation only permitted for Integer values");return new a(this.value|b.value)},b.bitXor=function(b){if(!(0,r.Z)(b,a))throw Error("Operation only permitted for Integer values");return new a(this.value^b.value)},b.bitShiftLeft=function(b){if(!(0,r.Z)(b,a))throw Error("Operation only permitted for Integer values");return new a(this.value<<b.value)},b.bitShiftRight=function(b){if(!(0,r.Z)(b,a))throw Error("Operation only permitted for Integer values");return new a(this.value>>b.value)},b.inspect=function(){return this.value.toString()},b.isTruthy=function(){return 0!==this.value},b.getName=function(){return"Integer"},b.hashCode=function(){return K.ZP.hash(this.value)},b.equals=function(b){return(0,r.Z)(b,a)&&this.value===b.value},b.add=function(b){if((0,r.Z)(b,a))return new a(this.value+b.value);if((0,r.Z)(b,W))return new a(Math.floor(this.value+b.value));throw Error("".concat(this.getName()," + ").concat(b.getName()," is not supported"))},b.subtract=function(b){if((0,r.Z)(b,a))return new a(this.value-b.value);if((0,r.Z)(b,W))return new a(Math.floor(this.value-b.value));throw Error("".concat(this.getName()," - ").concat(b.getName()," is not supported"))},b.multiply=function(b){if((0,r.Z)(b,a))return new a(this.value*b.value);if((0,r.Z)(b,W))return new a(Math.floor(this.value*b.value));throw Error("".concat(this.getName()," * ").concat(b.getName()," is not supported"))},b.divide=function(b){if((0,r.Z)(b,a)||(0,r.Z)(b,W)){if(0===b.value)throw Error("Division by zero");return new a(Math.floor(this.value/b.value))}throw Error("".concat(this.getName()," / ").concat(b.getName()," is not supported"))},b.modulo=function(b){if((0,r.Z)(b,a)){if(0===b.value)throw Error("Division by zero");var c=this.value%b.value,d=0===c||Math.sign(this.value)===Math.sign(b.value)?c:c+b.value;return new a(d)}if((0,r.Z)(b,W)){if(0===b.value)throw Error("Division by zero");var e=this.value%b.value,f=0===e||Math.sign(this.value)===Math.sign(b.value)?e:e+b.value;return new a(Math.floor(f))}throw Error("".concat(this.getName()," % ").concat(b.getName()," is not supported"))},b.lessThan=function(b){if((0,r.Z)(b,a)||(0,r.Z)(b,W))return this.value<b.value?Y:Z;throw Error("".concat(this.getName()," < ").concat(b.getName()," is not supported"))},b.lessThanEqual=function(a){return this.lessThan(a)==Y?Y:this.equals(a)?Y:Z},b.greaterThan=function(b){if((0,r.Z)(b,a)||(0,r.Z)(b,W))return this.value>b.value?Y:Z;throw Error("".concat(this.getName()," > ").concat(b.getName()," is not supported"))},b.greaterThanEqual=function(a){return this.greaterThan(a)==Y?Y:this.equals(a)?Y:Z},b.negative=function(){return new a(-this.value)},b.abs=function(){return new a(Math.abs(this.value))},a.parse=function(b){if((0,r.Z)(b,T))return new a(b===Y?1:0);if((0,r.Z)(b,a))return b;if((0,r.Z)(b,W))return new a(Math.floor(b.value));if((0,r.Z)(b,X))return new a(""===b.value?0:parseInt(b.value,10));throw Error("Parsing ".concat(b.getName()," as a ").concat(this.getName()," is not supported"))},a}(),W=function(){function a(b){(0,s.Z)(this,a),this.value=b}var b=a.prototype;return b.inspect=function(){return this.value.toString()},b.isTruthy=function(){return 0!==this.value},b.getName=function(){return"Decimal"},b.hashCode=function(){return K.ZP.hash(this.value)},b.equals=function(b){return(0,r.Z)(b,a)&&this.value===b.value},b.add=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a))return new a(this.value+b.value);throw Error("".concat(this.getName()," + ").concat(b.getName()," is not supported"))},b.subtract=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a))return new a(this.value-b.value);throw Error("".concat(this.getName()," / ").concat(b.getName()," is not supported"))},b.multiply=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a))return new a(this.value*b.value);throw Error("".concat(this.getName()," * ").concat(b.getName()," is not supported"))},b.divide=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a)){if(0===b.value)throw Error("Division by zero");return new a(this.value/b.value)}throw Error("".concat(this.getName()," / ").concat(b.getName()," is not supported"))},b.modulo=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a)){if(0===b.value)throw Error("Division by zero");var c=this.value%b.value,d=0===c||Math.sign(this.value)===Math.sign(b.value)?c:c+b.value;return new a(d)}throw Error("".concat(this.getName()," % ").concat(b.getName()," is not supported"))},b.lessThan=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a))return this.value<b.value?Y:Z;throw Error("".concat(this.getName()," < ").concat(b.getName()," is not supported"))},b.lessThanEqual=function(a){return this.lessThan(a)==Y?Y:this.equals(a)?Y:Z},b.greaterThan=function(b){if((0,r.Z)(b,V)||(0,r.Z)(b,a))return this.value>b.value?Y:Z;throw Error("".concat(this.getName()," > ").concat(b.getName()," is not supported"))},b.greaterThanEqual=function(a){return this.greaterThan(a)==Y?Y:this.equals(a)?Y:Z},b.negative=function(){return new a(-this.value)},b.abs=function(){return new a(Math.abs(this.value))},a.parse=function(b){if((0,r.Z)(b,T))return new a(b===Y?1:0);if((0,r.Z)(b,a))return b;if((0,r.Z)(b,V))return new V(b.value);if((0,r.Z)(b,X))return new a(""===b.value?0:parseFloat(b.value));throw Error("Parsing ".concat(b.getName()," as a ").concat(this.getName()," is not supported"))},a}(),X=function(){function a(b){(0,s.Z)(this,a),this.value=b}var b=a.prototype;return b.inspect=function(){return'"'.concat(this.value,'"')},b.isTruthy=function(){return""!==this.value},b.getName=function(){return"Str"},b.hashCode=function(){return K.ZP.hash(this.value)},b.equals=function(b){return(0,r.Z)(b,a)&&this.value===b.value},b.get=function(b){if((0,r.Z)(b,V)){var c=this.value[b.value<0?this.value.length+b.value:b.value];return void 0!==c?new a(c):$}if((0,r.Z)(b,ac))return new a(b.end<0?this.value.substring(b.start,this.value.length+b.end):b.start<0?this.value.substring(this.value.length+b.start,b.end+1):this.value.substring(b.start,b.isInclusive?b.end+1:b.end));throw Error("".concat(this.getName(),"[").concat(b.getName(),"] is not supported"))},b.size=function(){return new V(this.value.length)},b.includes=function(b){return(0,r.Z)(b,a)&&this.value.includes(b.value)?Y:Z},b.first=function(){return new a(this.value[0]||"")},b.rest=function(){return new a(this.value.substring(1))},b.last=function(){return new a(this.value[this.value.length-1]||"")},b.take=function(b){return new a(this.value.substring(0,b.value))},b.skip=function(b){return new a(this.value.substring(b.value))},b.find=function(a){try{var b=this.getInteralSeq().find(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()});return void 0!==b?b:$}catch(c){return c}},b.zip=function(a){var b;return new _((b=this.getInteralSeq()).zipWith.apply(b,[function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new _(b)}].concat((0,q.Z)(a.getInteralSeq().map(function(a){return a.getInteralSeq()})))))},b.getInteralSeq=function(){return K.ZP.List((0,q.Z)(this.value)).map(function(b){return new a(b)})},b.chunk=function(a){var b=this.getInteralSeq();return new _(K.ZP.Range(0,b.count(),a.value).map(function(c){return new _(b.slice(c,c+a.value))}).toList())},b.map=function(a){try{return new _(this.getInteralSeq().map(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c}))}catch(b){return b}},b.filter=function(a){try{return new _(this.getInteralSeq().filter(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(b){return b}},b.count=function(a){try{return new V(this.getInteralSeq().count(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(b){return b}},b.fold=function(a,b){try{return this.getInteralSeq().reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d},b)}catch(c){return c}},b.reduce=function(a){try{return this.getInteralSeq().reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d})}catch(b){return b}},b.each=function(a){try{return this.getInteralSeq().forEach(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;if((0,r.Z)(c,Q))throw $}),$}catch(b){return b}},b.add=function(b){var c=a.parse(b);return new a(this.value+c.value)},b.lessThan=function(b){if((0,r.Z)(b,a))return 0>this.value.localeCompare(b.value)?Y:Z;throw Error("".concat(this.getName()," < ").concat(b.getName()," is not supported"))},b.greaterThan=function(b){if((0,r.Z)(b,a))return this.value.localeCompare(b.value)>0?Y:Z;throw Error("".concat(this.getName()," > ").concat(b.getName()," is not supported"))},b.split=function(b){if((0,r.Z)(b,a))return new _(this.value.split(b.value).map(function(b){return new a(b)}));throw Error("split(".concat(b.getName(),", ").concat(this.getName(),") is not supported"))},b.regExMatch=function(b){if(!(0,r.Z)(b,a))throw Error("regex_match(".concat(b.getName(),", ").concat(this.getName(),") is not supported"));var c=this.value.match(RegExp(b.value));return new _((c||[]).slice(1).map(function(b){return new a(b)}))},b.regExMatchAll=function(b){if(!(0,r.Z)(b,a))throw Error("regex_match_all(".concat(b.getName(),", ").concat(this.getName(),") is not supported"));var c=this.value.match(RegExp(b.value,"g"));return new _((c||[]).map(function(b){return new a(b)}))},b.parseInts=function(){var a=this.value.match(RegExp("(-?[0-9]+)","g"));return new _((a||[]).map(function(a){return new V(parseInt(a,10))}))},b.toUpper=function(){return new a(this.value.toUpperCase())},b.toLower=function(){return new a(this.value.toLowerCase())},b.replace=function(b,c){return new a(this.value.replace(RegExp(b.value,"g"),c.value))},b.isImmutable=function(){return!0},a.parse=function(b){return(0,r.Z)(b,a)?b:new a(b.inspect())},a}(),Y=new T(!0),Z=new T(!1),$=new U,_=function(){function a(b){(0,s.Z)(this,a),this.items=K.ZP.List(b)}var b=a.prototype;return b.asMutable=function(){return new a(this.items.asMutable())},b.asImmutable=function(){return new a(this.items.asImmutable())},b.isImmutable=function(){return!this.items.__ownerID},b.inspect=function(){return"["+this.items.map(function(a){return a.inspect()}).join(", ")+"]"},b.isTruthy=function(){return this.items.size>0},b.getName=function(){return"List"},b.hashCode=function(){return this.items.hashCode()},b.equals=function(b){return(0,r.Z)(b,a)&&this.items.equals(b.items)},b.get=function(b){if((0,r.Z)(b,T))return this.items.get(b.value?1:0)||$;if((0,r.Z)(b,V))return this.items.get(b.value)||$;if((0,r.Z)(b,ac))return new a(this.items.slice(b.start,b.isInclusive&&b.end>=0?b.end+1:b.end));throw Error("Unsupported 'get' operation ".concat(this.getName(),", ").concat(b.getName()))},b.size=function(){return new V(this.items.size)},b.includes=function(a){return this.items.includes(a)?Y:Z},b.first=function(){return this.items.first()||$},b.rest=function(){return new a(this.items.rest())},b.last=function(){return this.items.last()||$},b.take=function(b){return new a(this.items.take(b.value))},b.skip=function(b){return new a(this.items.skip(b.value))},b.find=function(a){try{return this.items.find(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()})||$}catch(b){return b}},b.zip=function(b){var c;return new a((c=this.items).zipWith.apply(c,[function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return new a(c)}].concat((0,q.Z)(b.getInteralSeq().map(function(a){return a.getInteralSeq()})))))},b.map=function(b){try{return new a(this.items.map(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c}))}catch(c){return c}},b.scan=function(b,c){try{var d=c;return new a(K.ZP.List([d]).merge(this.items.map(function(a){if(d=b(d,a),(0,r.Z)(d,L))throw d;return d})))}catch(e){return e}},b.filter=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1];try{if(c)return this.items=this.items.filter(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.isTruthy()}).asMutable(),this;return new a(this.items.filter(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(d){return d}},b.count=function(a){try{return new V(this.items.count(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(b){return b}},b.fold=function(a,b){try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d},b)}catch(c){return c}},b.reduce=function(a){try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d})}catch(b){return b}},b.each=function(a){try{return this.items.forEach(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;if((0,r.Z)(c,Q))throw $}),$}catch(b){return b}},b.flatMap=function(b){try{return new a(this.items.flatMap(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.items}))}catch(c){return c}},b.add=function(b){if((0,r.Z)(b,a)||(0,r.Z)(b,ab)||(0,r.Z)(b,ac))return new a(this.items.concat(b.items));throw Error("".concat(this.getName()," + ").concat(b.getName()," is not supported"))},b.vectorAdd=function(b){if(!(0,r.Z)(b,a))throw Error("".concat(this.getName()," + ").concat(b.getName()," is not supported"));return new a(this.items.zip(b.items).map(function(b){return new a(b).sum()}))},b.subtract=function(b){if((0,r.Z)(b,a))return new a(this.items.filter(function(a){return!b.items.includes(a)}));if((0,r.Z)(b,ab))return new a(this.items.filter(function(a){return!b.items.includes(a)}));throw Error("".concat(this.getName()," - ").concat(b.getName()," is not supported"))},b.multiply=function(b){if((0,r.Z)(b,V)){for(var c=this.items.asMutable(),d=b.value;--d;)c.concat(this.items);return new a(c.asImmutable())}throw Error("".concat(this.getName()," * ").concat(b.getName()," is not supported"))},b.chunk=function(b){var c=this;return new a(K.ZP.Range(0,this.items.count(),b.value).map(function(d){return new a(c.items.slice(d,d+b.value))}).toList())},b.combinations=function(b){var c=function(a,b){if(a<1)return new K.ZP.List([new K.ZP.List]);if(0===b.size)return new K.ZP.List;var d=b.first(),e=b.rest();return c(a-1,e).map(function(a){return a.unshift(d)}).concat(c(a,e))};return new a(c(b.value,this.items).map(function(b){return new a(b)}))},b.cycle=function(){var a=this;return 0===this.items.size?this:ac.fromExclusiveRange(0,1/0,1).map(function(b){return a.items.get(b.value%a.items.size)})},b.min=function(){return this.items.min(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.max=function(){return this.items.max(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.sum=function(){return this.items.isEmpty()?new V(0):this.items.reduce(function(a,b){return a.add(b)})},b.remove=function(b){if((0,r.Z)(b,V))return new a(this.items.remove(b.value));throw Error("remove(".concat(b.getName(),", ").concat(this.getName(),") is not supported"))},b.getInteralSeq=function(){return this.items},b.sort=function(b){return new a(this.items.sort(function(a,c){var d=b(a,c);if((0,r.Z)(d,L))throw d;return(0,r.Z)(d,V)?d.value:d.isTruthy()?1:-1}))},b.reverse=function(){return new a(this.items.reverse())},b.assoc=function(b,c){if(!(0,r.Z)(b,V))throw Error("Expected List index to be an Integer");return new a(this.items.set(b.value,c).map(function(a){return a||$}))},b.update=function(b,c,d){if(!(0,r.Z)(b,V))throw Error("Expected List index to be an Integer");return new a(this.items.update(b.value,c,function(a){var b=d(a);if((0,r.Z)(b,L))throw b;return b}).map(function(a){return a||$}))},b.assign=function(b,c){if(!(0,r.Z)(b,V))throw Error("Expected List index to be an Integer");return new a(this.items.set(b.value,c))},b.push=function(b){return new a(this.items.push(b))},b.shuffle=function(){return new a(this.items.withMutations(function(a){for(var b=a.size;b;){var c=Math.floor(Math.random()*b--),d=a.get(b);a.set(b,a.get(c)),a.set(c,d)}}))},b.rotate=function(b){if(!(0,r.Z)(b,V))throw Error("Expected List steps to be an Integer");var c=b.value;if(0===c)return this;var d=this.isImmutable()?this.items.asMutable():this.items;if(c>0)for(var e=0;e<c;e++){var f=d.last();d.pop(),d.unshift(f)}if(c<0)for(var g=0;g<Math.abs(c);g++){var h=d.first();d.shift(),d.push(h)}return this.isImmutable()?new a(d.asImmutable()):this},a.from=function(b){if((0,r.Z)(b,a)||(0,r.Z)(b,ab))return new a(b.items);if((0,r.Z)(b,aa))return new a((0,q.Z)(b.items.entries()).map(function(b){return new a(b)}));if((0,r.Z)(b,ac))return new a(b.items);throw Error("Unable to convert ".concat(b.getName()," into a List"))},a}(),aa=function(){function a(b){(0,s.Z)(this,a),this.items=K.ZP.Map(b)}var b=a.prototype;return b.asMutable=function(){return new a(this.items.asMutable())},b.asImmutable=function(){return new a(this.items.asImmutable())},b.isImmutable=function(){return!this.items.__ownerID},b.inspect=function(){return"#{"+(0,q.Z)(this.items.entries()).map(function(a){var b=(0,p.Z)(a,2),c=b[0],d=b[1];return"".concat(c.inspect(),": ").concat(d.inspect())}).join(", ")+"}"},b.isTruthy=function(){return this.items.size>0},b.getName=function(){return"Dictionary"},b.hashCode=function(){return this.items.hashCode()},b.equals=function(b){return(0,r.Z)(b,a)&&this.items.equals(b.items)},b.get=function(a){return this.items.get(a)||$},b.size=function(){return new V(this.items.size)},b.includes=function(a){return this.items.includes(a)?Y:Z},b.find=function(a){try{return this.items.find(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;return d.isTruthy()})||$}catch(b){return b}},b.map=function(b){try{return new a(this.items.map(function(a,c){var d=b(a,c);if((0,r.Z)(d,L))throw d;return d}))}catch(c){return c}},b.filter=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1];try{if(c)return this.items=this.items.filter(function(a,c){var d=b(a,c);if((0,r.Z)(d,L))throw d;return d.isTruthy()}).asMutable(),this;return new a(this.items.filter(function(a,c){var d=b(a,c);if((0,r.Z)(d,L))throw d;return d.isTruthy()}))}catch(d){return d}},b.count=function(a){try{return new V(this.items.count(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;return d.isTruthy()}))}catch(b){return b}},b.fold=function(a,b){try{return this.items.reduce(function(b,c,d){var e=a(b,c,d);if((0,r.Z)(e,L))throw e;if((0,r.Z)(e,Q))throw e.value;return e},b)}catch(c){return c}},b.reduce=function(a){try{return this.items.reduce(function(b,c,d){var e=a(b,c,d);if((0,r.Z)(e,L))throw e;if((0,r.Z)(e,Q))throw e.value;return e})}catch(b){return b}},b.each=function(a){try{return this.items.forEach(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw $}),$}catch(b){return b}},b.add=function(b){if((0,r.Z)(b,a))return new a(this.items.concat(b.items));throw Error("".concat(this.getName()," + ").concat(b.getName()," is not supported"))},b.keys=function(){return new _(this.items.keys())},b.values=function(){return new _(this.items.values())},b.subtract=function(b){if((0,r.Z)(b,ab)){var c=this.items.asMutable(),d=!0,e=!1,f=void 0;try{for(var g,h=b.items[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;c.remove(i)}}catch(j){e=!0,f=j}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return new a(c.toMap())}throw Error("".concat(this.getName()," - ").concat(b.getName()," is not supported"))},b.min=function(){return this.items.min(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.max=function(){return this.items.max(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.sum=function(){return this.items.isEmpty()?new V(0):this.items.reduce(function(a,b){return a.add(b)})},b.remove=function(b){return new a(this.items.remove(b))},b.assoc=function(b,c){return new a(this.items.set(b,c))},b.update=function(b,c,d){return new a(this.items.update(b,c,function(a){var b=d(a);if((0,r.Z)(b,L))throw b;return b}))},b.assign=function(b,c){return new a(this.items.set(b,c))},a.from=function(b){if((0,r.Z)(b,_))return new a(b.items.map(function(a){if(!(0,r.Z)(a,_)||2!==a.items.size)throw Error("The List is expected to be of the form [[K, V], ..] to convert to a Dictionary");return[a.items.get(0),a.items.get(1)]}));if((0,r.Z)(b,a))return new a(b.items);throw Error("Unable to convert ".concat(b.getName()," into a Dictionary"))},a}(),ab=function(){function a(b){(0,s.Z)(this,a),this.items=K.ZP.Set(b)}var b=a.prototype;return b.asMutable=function(){return new a(this.items.asMutable())},b.asImmutable=function(){return new a(this.items.asImmutable())},b.isImmutable=function(){return!this.items.__ownerID},b.inspect=function(){return"{"+this.items.map(function(a){return a.inspect()}).join(", ")+"}"},b.isTruthy=function(){return this.items.size>0},b.getName=function(){return"Set"},b.hashCode=function(){return this.items.hashCode()},b.equals=function(b){return(0,r.Z)(b,a)&&this.items.equals(b.items)},b.get=function(a){return this.items.get(a)||$},b.size=function(){return new V(this.items.size)},b.includes=function(a){return this.items.includes(a)?Y:Z},b.find=function(a){try{return this.items.find(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()})||$}catch(b){return b}},b.map=function(b){try{return new a(this.items.map(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c}))}catch(c){return c}},b.filter=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1];try{if(c)return this.items=this.items.filter(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.isTruthy()}).asMutable(),this;return new a(this.items.filter(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(d){return d}},b.count=function(a){try{return new V(this.items.count(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(b){return b}},b.fold=function(a,b){try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d},b)}catch(c){return c}},b.reduce=function(a){try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d})}catch(b){return b}},b.each=function(a){try{return this.items.forEach(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;if((0,r.Z)(c,Q))throw $}),$}catch(b){return b}},b.push=function(b){return new a(this.items.add(b))},b.add=function(b){if((0,r.Z)(b,_)||(0,r.Z)(b,a)||(0,r.Z)(b,ac))return new a(this.items.concat(b.items));throw Error("".concat(this.getName()," + ").concat(b.getName()," is not supported"))},b.subtract=function(b){if((0,r.Z)(b,a)||(0,r.Z)(b,_))return new a(this.items.subtract(b.items));throw Error("".concat(this.getName()," - ").concat(b.getName()," is not supported"))},b.min=function(){return this.items.min(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.max=function(){return this.items.max(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.sum=function(){return this.items.isEmpty()?new V(0):this.items.reduce(function(a,b){return a.add(b)})},b.remove=function(b){return new a(this.items.remove(b))},a.union=function(b){return new a(K.ZP.Set.union(b.map(function(a){return a.items})))},a.intersection=function(b){return new a(K.ZP.Set.intersect(b.map(function(a){return a.items})))},a.from=function(b){if((0,r.Z)(b,_)||(0,r.Z)(b,a)||(0,r.Z)(b,ac))return new a(b.items);if((0,r.Z)(b,X))return new a(b.split(new X("")).items);throw Error("Unable to convert ".concat(b.getName()," into a Set"))},a}(),ac=function(){function a(b,c,d,e){(0,s.Z)(this,a),this.start=b,this.end=c,this.items=d,this.isInclusive=e}var b=a.prototype;return b.inspect=function(){return this.end===1/0?"["+this.items.take(3).map(function(a){return a.inspect()}).join(", ")+", ..∞]":"["+this.items.map(function(a){return a.inspect()}).join(", ")+"]"},b.isTruthy=function(){return this.end===1/0||(this.items.cacheResult(),this.items.size>0)},b.getName=function(){return"Range"},b.hashCode=function(){return this.items.hashCode()},b.equals=function(b){return(0,r.Z)(b,a)&&this.items.equals(b.items)},b.get=function(b){if((0,r.Z)(b,V))return this.items.get(b.value)||$;if((0,r.Z)(b,a))return new a(this.start,this.end,this.items.slice(b.start,b.isInclusive&&b.end>=0?b.end+1:b.end),this.isInclusive);throw Error("Unsupported 'get' operation ".concat(this.getName(),", ").concat(b.getName()))},b.size=function(){return this.end===1/0?new V(1/0):(this.items.cacheResult(),new V(this.items.size))},b.includes=function(a){return(0,r.Z)(a,V)?this.end===1/0?a.value>=this.start?Y:Z:this.items.includes(a)?Y:Z:Z},b.first=function(){return this.items.first()||$},b.rest=function(){return new a(this.start,this.end,this.items.rest(),this.isInclusive)},b.last=function(){if(this.end===1/0)throw Error("Unable to find last item within an infinite range");return this.items.last()||$},b.take=function(b){return new a(this.start,0,this.items.take(b.value),this.isInclusive)},b.skip=function(b){return new a(this.start,this.end,this.items.skip(b.value),this.isInclusive)},b.find=function(a){try{return this.items.find(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()})||$}catch(b){return b}},b.zip=function(b){var c,d=(c=this.items).zipWith.apply(c,[function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new _(b)}].concat((0,q.Z)(b.getInteralSeq().map(function(a){return a.getInteralSeq()}))));return d.size===1/0|| void 0===d.size?new a(this.start,1/0,d,this.isInclusive):new _(d)},b.map=function(b){try{return new a(this.start,this.end,this.items.map(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c}),this.isInclusive)}catch(c){return c}},b.filter=function(b){try{return new a(this.start,this.end,this.items.filter(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.isTruthy()}),this.isInclusive)}catch(c){return c}},b.count=function(a){try{return new V(this.items.count(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(b){return b}},b.fold=function(a,b){if(this.end===1/0)throw Error("Unable to fold an infinite range");try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d},b)}catch(c){return c}},b.reduce=function(a){if(this.end===1/0)throw Error("Unable to reduce an infinite range");try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d})}catch(b){return b}},b.each=function(a){try{return this.end===1/0&&(this.items.size=0),this.items.forEach(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;if((0,r.Z)(c,Q))throw $}),$}catch(b){return b}finally{this.end===1/0&&(this.items.size=1/0)}},b.flatMap=function(a){try{return new _(this.items.flatMap(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.items}))}catch(b){return b}},b.min=function(){return this.items.min(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.max=function(){return this.items.max(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.sum=function(){return this.items.isEmpty()?new V(0):this.items.reduce(function(a,b){return a.add(b)})},b.getInteralSeq=function(){return this.items},b.isImmutable=function(){return!0},a.fromExclusiveRange=function(b,c,d){return new a(b,c,K.ZP.Range(b,c,d).map(function(a){return new V(a)}),!1)},a.fromInclusiveRange=function(b,c,d){return new a(b,c,K.ZP.Range(b,c+(c<b?-1:1),d).map(function(a){return new V(a)}),!0)},a.repeat=function(b){return new a(0,1/0,K.ZP.Repeat(b),!1)},a}(),ad=function(){function a(b){(0,s.Z)(this,a),this.items=b}var b=a.prototype;return b.inspect=function(){return"["+this.items.map(function(a){return a.inspect()}).join(", ")+"]"},b.isTruthy=function(){return!0},b.getName=function(){return"Sequence"},b.hashCode=function(){return this.items.hashCode()},b.equals=function(b){return(0,r.Z)(b,a)&&this.items.equals(b.items)},b.get=function(b){if((0,r.Z)(b,V))return this.items.get(b.value)||$;if((0,r.Z)(b,ac))return new a(this.items.slice(b.start,b.isInclusive&&b.end>=0?b.end+1:0));throw Error("Unsupported 'get' operation ".concat(this.getName(),", ").concat(b.getName()))},b.size=function(){return new V(1/0)},b.includes=function(a){return(0,r.Z)(a,V)&&this.items.includes(a)?Y:Z},b.first=function(){return this.items.first()||$},b.rest=function(){return new a(this.items.rest())},b.last=function(){return this.items.last()||$},b.take=function(a){return new _(this.items.take(a.value).toList())},b.skip=function(b){return new a(this.items.skip(b.value))},b.find=function(a){try{return this.items.find(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()})||$}catch(b){return b}},b.zip=function(b){var c,d=(c=this.items).zipWith.apply(c,[function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new _(b)}].concat((0,q.Z)(b.getInteralSeq().map(function(a){return a.getInteralSeq()}))));return d.size===1/0|| void 0===d.size?new a(d):new _(d)},b.map=function(b){try{return new a(this.items.map(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c}))}catch(c){return c}},b.filter=function(b){try{return new a(this.items.filter(function(a){var c=b(a);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(c){return c}},b.count=function(a){try{return new V(this.items.count(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.isTruthy()}))}catch(b){return b}},b.fold=function(a,b){try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d},b)}catch(c){return c}},b.reduce=function(a){try{return this.items.reduce(function(b,c){var d=a(b,c);if((0,r.Z)(d,L))throw d;if((0,r.Z)(d,Q))throw d.value;return d})}catch(b){return b}},b.each=function(a){try{return this.items.forEach(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;if((0,r.Z)(c,Q))throw $}),$}catch(b){return b}finally{}},b.flatMap=function(a){try{return new _(this.items.flatMap(function(b){var c=a(b);if((0,r.Z)(c,L))throw c;return c.items}))}catch(b){return b}},b.min=function(){return this.items.min(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.max=function(){return this.items.max(function(a,b){return a.equals(b).value?0:a.lessThan(b).value?-1:1})||$},b.getInteralSeq=function(){return this.items},b.isImmutable=function(){return!0},a.iterate=function(b,c){return new a(K.ZP.Seq(J().mark(function a(){var d;return J().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:d=c;case 1:return a.next=4,d;case 4:d=b(d),a.next=1;break;case 7:case"end":return a.stop()}},a)})()))},a}(),ae=function(){function a(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null;(0,s.Z)(this,a),this.parent=b,this.sections={},this.variables={}}var b=a.prototype;return b.getVariable=function(a){var b=this.variables[a];return b?b.value:this.parent?this.parent.getVariable(a):void 0},b.declareVariable=function(a,b,c){if(this.variables[a])throw Error("Variable ".concat(a," has already been declared"));return this.variables[a]={value:b,isMutable:c},b},b.setVariable=function(a,b){if(this.variables[a]){if(!this.variables[a].isMutable)throw Error("Variable ".concat(a," is not mutable"));return this.variables[a].value=b,b}if(this.parent)return this.parent.setVariable(a,b);throw Error("Variable ".concat(a," has not been declared"))},b.addSection=function(a,b){return this.sections[a]=(0,q.Z)(this.sections[a]||[]).concat([b]),b},b.getSection=function(a){return this.sections[a]||[]},b.hasSection=function(a){return this.getSection(a).length>0},b.setIO=function(a){this.io=a},b.getIO=function(){if(this.io)return this.io;if(this.parent)return this.parent.getIO();throw Error("IO has not been specified")},a}(),af=function(){function a(b,c,d){var e=arguments.length>3&& void 0!==arguments[3]?arguments[3]:[];(0,s.Z)(this,a),this.name=b,this.section=c,this.environment=d,this.attributes=e}var b=a.prototype;return b.hasAttribute=function(a){return this.attributes.some(function(b){return b.name===a})},b.inspect=function(){return"".concat(this.name,": {…}")},b.isTruthy=function(){return!0},b.getName=function(){return"Section"},a}(),ag=(0,H.Z)({},k,l,h,i,j,m,n),ah={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").add(a.getVariable("b"))}},ai={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").subtract(a.getVariable("b"))}},aj={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").multiply(a.getVariable("b"))}},ak={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").divide(a.getVariable("b"))}},al={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").modulo(a.getVariable("b"))}},am={parameters:[{kind:e.Identifier,value:"a"},],body:function(a){return a.getVariable("a").negative()}},an={parameters:[{kind:e.Identifier,value:"a"},],body:function(a){return a.getVariable("a").abs()}},ao={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return a.getVariable("value")}},ap={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").equals(a.getVariable("b"))?ag.TRUE:ag.FALSE}},aq={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").equals(a.getVariable("b"))?ag.FALSE:ag.TRUE}},ar={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").lessThan(a.getVariable("b"))}},as={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").lessThanEqual(a.getVariable("b"))}},at={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").greaterThan(a.getVariable("b"))}},au={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").greaterThanEqual(a.getVariable("b"))}},av={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").isTruthy()&&a.getVariable("b").isTruthy()?ag.TRUE:ag.FALSE}},aw={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").isTruthy()||a.getVariable("b").isTruthy()?ag.TRUE:ag.FALSE}},ax={parameters:[{kind:e.Identifier,value:"a"},],body:function(a){return a.getVariable("a").isTruthy()?ag.FALSE:ag.TRUE}},ay={parameters:[{kind:e.Identifier,value:"assertion"},],body:function(a){if(!a.getVariable("assertion").isTruthy())throw Error("Assertion failed");return ag.NIL}},az={parameters:[{kind:e.Identifier,value:"mapper"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("mapper");return a.getVariable("collection").map(function(a,c){return b6(b,[a,c])})}},aA={parameters:[{kind:e.Identifier,value:"predicate"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("predicate");return a.getVariable("collection").filter(function(a,c){return b6(b,[a,c])})}},aB={parameters:[{kind:e.Identifier,value:"mapper"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("mapper");return a.getVariable("collection").map(function(a,c){return b6(b,[a,c])}).filter(function(a){return a})}},aC={parameters:[{kind:e.Identifier,value:"predicate"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");var b=a.getVariable("predicate");return a.getVariable("collection").filter(function(a,c){return b6(b,[a,c])},!0)}},aD={parameters:[{kind:e.Identifier,value:"reducer"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("reducer");return a.getVariable("collection").reduce(function(a,c,d){return b6(b,[a,c,d])})}},aE={parameters:[{kind:e.Identifier,value:"initial"},{kind:e.Identifier,value:"folder"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("folder");return a.getVariable("collection").fold(function(a,c,d){return b6(b,[a,c,d])},a.getVariable("initial"))}},aF={parameters:[{kind:e.Identifier,value:"initial"},{kind:e.Identifier,value:"folder"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("folder"),c=a.getVariable("collection").fold(function(a,c,d){return b6(b,[a,c,d])},a.getVariable("initial"));if((0,r.Z)(c,ag.Err))return c;if((0,r.Z)(c,ag.List))return c.first();throw Error("fold_s expects the result to be a List")}},aG={parameters:[{kind:e.Identifier,value:"initial"},{kind:e.Identifier,value:"mapper"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("mapper");return a.getVariable("collection").scan(function(a,c){return b6(b,[a,c])},a.getVariable("initial"))}},aH={parameters:[{kind:e.Identifier,value:"effect"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("effect");return a.getVariable("collection").each(function(a,c){return b6(b,[a,c])})}},aI={parameters:[{kind:e.Identifier,value:"mapper"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("mapper");return a.getVariable("collection").flatMap(function(a,c){return b6(b,[a,c])})}},aJ={parameters:[{kind:e.Identifier,value:"predicate"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("predicate");return a.getVariable("collection").find(function(a,c){return b6(b,[a,c])})}},aK={parameters:[{kind:e.Identifier,value:"mapper"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("mapper");return a.getVariable("collection").map(function(a,c){return b6(b,[a,c])}).find(function(a){return a})}},aL={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").reverse()}},aM={parameters:[{kind:e.Identifier,value:"comparator"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("comparator");return a.getVariable("collection").sort(function(a,c){return b6(b,[a,c])})}},aN={parameters:[{kind:e.Identifier,value:"collection"},{kind:e.Identifier,value:"value"},],body:function(a){return a.getVariable("collection").includes(a.getVariable("value"))}},aO={parameters:[{kind:e.Identifier,value:"collection"},{kind:e.Identifier,value:"value"},],body:function(a){return a.getVariable("collection").includes(a.getVariable("value"))===ag.TRUE?ag.FALSE:ag.TRUE}},aP={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").size()}},aQ={parameters:[{kind:e.Identifier,value:"predicate"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("predicate");return a.getVariable("collection").count(function(a,c){return b6(b,[a,c])})}},aR={parameters:[{kind:e.Identifier,value:"size"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").chunk(a.getVariable("size"))}},aS={parameters:[{kind:e.Identifier,value:"collection"},{kind:e.RestElement,argument:{kind:e.Identifier,value:"collections"}},],body:function(a){return a.getVariable("collection").zip(a.getVariable("collections"))}},aT={parameters:[{kind:e.Identifier,value:"total"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").take(a.getVariable("total"))}},aU={parameters:[{kind:e.Identifier,value:"total"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").skip(a.getVariable("total"))}},aV={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").first()}},aW={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").get(new ag.Integer(1))}},aX={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").last()}},aY={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").rest()}},aZ={parameters:[{kind:e.Identifier,value:"size"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").combinations(a.getVariable("size"))}},a$={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").keys()}},a_={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").values()}},a0={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return ag.Dictionary.from(a.getVariable("collection"))}},a1={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return ag.Set.from(a.getVariable("collection"))}},a2={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return ag.List.from(a.getVariable("collection"))}},a3={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").cycle()}},a4={parameters:[{kind:e.RestElement,argument:{kind:e.Identifier,value:"values"}},],body:function(a){var b=(0,q.Z)(a.getVariable("values").items);return 1===b.length?b[0].min():new ag.List(b).min()}},a5={parameters:[{kind:e.RestElement,argument:{kind:e.Identifier,value:"values"}},],body:function(a){var b=(0,q.Z)(a.getVariable("values").items);return 1===b.length?b[0].max():new ag.List(b).max()}},a6={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").asMutable()}},a7={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").asImmutable()}},a8={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"value"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").assoc(a.getVariable("key"),a.getVariable("value"))}},a9={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"value"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").assoc(a.getVariable("key"),a.getVariable("value"))}},ba={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"default"},{kind:e.Identifier,value:"updater"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").update(a.getVariable("key"),a.getVariable("default"),function(b){return b6(a.getVariable("updater"),[b])})}},bb={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"default"},{kind:e.Identifier,value:"updater"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").update(a.getVariable("key"),a.getVariable("default"),function(b){return b6(a.getVariable("updater"),[b])})}},bc={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"updater"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").update(a.getVariable("key"),ag.NIL,function(b){return b6(a.getVariable("updater"),[b])})}},bd={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"updater"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").update(a.getVariable("key"),ag.NIL,function(b){return b6(a.getVariable("updater"),[b])})}},be={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"value"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").assign(a.getVariable("key"),a.getVariable("value"))}},bf={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"value"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").assign(a.getVariable("key"),a.getVariable("value"))}},bg={parameters:[{kind:e.Identifier,value:"value"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").push(a.getVariable("value"))}},bh={parameters:[{kind:e.Identifier,value:"value"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").push(a.getVariable("value"))}},bi={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").get(a.getVariable("key"))}},bj={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return ag.Range.repeat(a.getVariable("value"))}},bk={parameters:[{kind:e.Identifier,value:"start"},{kind:e.Identifier,value:"end"},{kind:e.Identifier,value:"step"},],body:function(a){return ag.Range.fromInclusiveRange(a.getVariable("start").value,a.getVariable("end").value,a.getVariable("step").value)}},bl={parameters:[{kind:e.Identifier,value:"predicate"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").filter(function(b,c){return b6(a.getVariable("predicate"),[b,c])}).equals(a.getVariable("collection"))?ag.TRUE:ag.FALSE}},bm={parameters:[{kind:e.Identifier,value:"predicate"},{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").find(function(b,c){return b6(a.getVariable("predicate"),[b,c])})===ag.NIL?ag.FALSE:ag.TRUE}},bn={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").remove(a.getVariable("key"))}},bo={parameters:[{kind:e.Identifier,value:"key"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").remove(a.getVariable("key"))}},bp={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").shuffle()}},bq={parameters:[{kind:e.Identifier,value:"steps"},{kind:e.Identifier,value:"collection"},],body:function(a){if(!a.getVariable("collection").isImmutable())throw Error("Expected immutable collection");return a.getVariable("collection").rotate(a.getVariable("steps"))}},br={parameters:[{kind:e.Identifier,value:"steps"},{kind:e.Identifier,value:"collection"},],body:function(a){if(a.getVariable("collection").isImmutable())throw Error("Expected mutable collection");return a.getVariable("collection").rotate(a.getVariable("steps"))}},bs={parameters:[{kind:e.Identifier,value:"fn"},{kind:e.Identifier,value:"initial"},],body:function(a){return ag.Sequence.iterate(function(b){return b6(a.getVariable("fn"),[b])},a.getVariable("initial"))}},bt={parameters:[{kind:e.Identifier,value:"collection"},],body:function(a){return a.getVariable("collection").sum()}},bu={parameters:[{kind:e.RestElement,argument:{kind:e.Identifier,value:"collections"}},],body:function(a){var b=(0,q.Z)(a.getVariable("collections").items);return 1===b.length?ag.Set.union((0,q.Z)(b[0].items)):ag.Set.union(b)}},bv={parameters:[{kind:e.RestElement,argument:{kind:e.Identifier,value:"collections"}},],body:function(a){var b=(0,q.Z)(a.getVariable("collections").items);return 1===b.length?ag.Set.intersection((0,q.Z)(b[0].items)):ag.Set.intersection(b)}},bw={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").vectorAdd(a.getVariable("b"))}},bx={parameters:[{kind:e.RestElement,argument:{kind:e.Identifier,value:"values"}},],body:function(a){return a.getIO().output((0,q.Z)(a.getVariable("values").items.map(function(a){return a.inspect()}))),ag.NIL}},by={parameters:[{kind:e.Identifier,value:"path"},],body:function(a){return new ag.Str(a.getIO().input(a.getVariable("path").value))}},bz={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return ag.Bool.parse(a.getVariable("value"))}},bA={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return ag.Integer.parse(a.getVariable("value"))}},bB={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return ag.Decimal.parse(a.getVariable("value"))}},bC={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return ag.Str.parse(a.getVariable("value"))}},bD={parameters:[{kind:e.Identifier,value:"delimiter"},{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").split(a.getVariable("delimiter"))}},bE={parameters:[{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").split(new ag.Str("\n"))}},bF={parameters:[{kind:e.Identifier,value:"pattern"},{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").regExMatch(a.getVariable("pattern"))}},bG={parameters:[{kind:e.Identifier,value:"pattern"},{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").regExMatchAll(a.getVariable("pattern"))}},bH={parameters:[{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").parseInts()}},bI={parameters:[{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").toUpper()}},bJ={parameters:[{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").toLower()}},bK={parameters:[{kind:e.Identifier,value:"subject"},{kind:e.Identifier,value:"replacement"},{kind:e.Identifier,value:"string"},],body:function(a){return a.getVariable("string").replace(a.getVariable("subject"),a.getVariable("replacement"))}},bL={parameters:[{kind:e.Identifier,value:"separator"},{kind:e.Identifier,value:"collection"},],body:function(a){var b=a.getVariable("separator"),c=a.getVariable("collection");if(!(0,r.Z)(b,ag.Str))throw Error("join expects a string separator, got ".concat(b.getName()));var d=[];return c.getInteralSeq().forEach(function(a){d.push(a.inspect().replace(/^"|"$/g,""))}),new ag.Str(d.join(b.value))}},bM={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").bitAnd(a.getVariable("b"))}},bN={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").bitOr(a.getVariable("b"))}},bO={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").bitXor(a.getVariable("b"))}},bP={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").bitShiftLeft(a.getVariable("b"))}},bQ={parameters:[{kind:e.Identifier,value:"a"},{kind:e.Identifier,value:"b"},],body:function(a){return a.getVariable("a").bitShiftRight(a.getVariable("b"))}},bR={parameters:[{kind:e.Identifier,value:"source"},],body:function(a){var b,c=new w(a.getVariable("source").value);try{b=new D(c).parse()}catch(d){throw{message:"Parser error: ".concat(d.message),line:d.token.line,column:d.token.column}}return cf(b,new ag.Environment)}},bS={parameters:[{kind:e.Identifier,value:"value"},],body:function(a){return new ag.Str(a.getVariable("value").getName())}},bT={parameters:[{kind:e.Identifier,value:"fn"},],body:function(a){var b=a.getVariable("fn"),c=new Map;return new ag.BuiltinFunc([{kind:e.RestElement,argument:{kind:e.Identifier,value:"args"}},],function(a){var d=JSON.stringify((0,q.Z)(a.getVariable("args").items));if(c.has(d))return c.get(d);var e=b6(b,(0,q.Z)(a.getVariable("args").items));return c.set(d,e),e},a)}},bU=(0,H.Z)({},{"+":ah,"-":ai,"*":aj,"/":ak,"%":al,"unary_-":am,abs:an},{"<":ar,">":at,"<=":as,">=":au,"==":ap,"!=":aq,"&&":av,"||":aw,"unary_!":ax,assert:ay,id:ao},{map:az,filter:aA,"filter!":aC,filter_map:aB,reduce:aD,fold:aE,fold_s:aF,scan:aG,each:aH,flat_map:aI,find:aJ,find_map:aK,reverse:aL,sort:aM,"includes?":aN,"excludes?":aO,size:aP,count:aQ,chunk:aR,zip:aS,take:aT,skip:aU,first:aV,second:aW,last:aX,rest:aY,min:a4,max:a5,combinations:aZ,dict:a0,set:a1,list:a2,cycle:a3,keys:a$,values:a_,"mut!":a6,imut:a7,assoc:a8,"assoc!":a9,update:bc,"update!":bd,update_d:ba,"update_d!":bb,assign:be,"assign!":bf,push:bg,"push!":bh,remove:bn,"remove!":bo,get:bi,repeat:bj,range:bk,"all?":bl,"any?":bm,shuffle:bp,rotate:bq,"rotate!":br,iterate:bs,sum:bt,union:bu,intersection:bv,vec_add:bw},{puts:bx,read:by},{bool:bz,int:bA,dec:bB,str:bC,split:bD,lines:bE,regex_match:bF,regex_match_all:bG,ints:bH,upper:bI,lower:bJ,replace:bK,join:bL,bit_or:bN,bit_and:bM,bit_xor:bO,bit_shift_left:bP,bit_shift_right:bQ},{evaluate:bR,type:bS,memoize:bT}),bV=function(a){return(0,r.Z)(a,ag.Err)},bW=function(a,b){var c=ag.NIL,d=!0,f=!1,g=void 0;try{for(var h,i=a[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;if(j.kind!==e.CommentStatement){if(c=cf(j,b),(0,r.Z)(c,ag.Err))break;if((0,r.Z)(c,ag.ReturnValue))return c.value}}}catch(k){f=!0,g=k}finally{try{d||null==i.return||i.return()}finally{if(f)throw g}}return c},bX=function(a,b){var c=[],d=!0,f=!1,g=void 0;try{for(var h,i=a[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j,k=h.value,l=cf(k,b);if(bV(l))return[l];if(k.kind===e.SpreadElement){if(!(0,r.Z)(l,ag.List))throw Error("Expected ".concat(e.SpreadElement," to be a list"));(j=c).push.apply(j,(0,q.Z)(l.items));continue}c.push(l)}}catch(m){f=!0,g=m}finally{try{d||null==i.return||i.return()}finally{if(f)throw g}}return c},bY=function(a,b){var c=bX(a.elements,b),d=c[0];return bV(d)?d:new ag.List(c)},bZ=function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a.pairs[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=bX(i,b),k=j[0];if(bV(k))return k;c.push(j)}}catch(l){e=!0,f=l}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return new ag.Dictionary(c)},b$=function(a,b){var c=bX(a.elements,b),d=c[0];return bV(d)?d:new ag.Set(c)},b_=function(a,b){var c=cf(a.start,b);if(bV(c))return c;if(!(0,r.Z)(c,ag.Integer))return new ag.Err("Expected range start value to be an integer",a);var d=cf(a.end,b);return bV(d)?d:(0,r.Z)(d,ag.Integer)?a.isInclusive?ag.Range.fromInclusiveRange(c.value,d.value,1):ag.Range.fromExclusiveRange(c.value,d.value,1):new ag.Err("Expected range end value to be an integer",a)},b0=function(a,b){var c=b.getVariable(a.value);if(c)return c;var d=bU[a.value];return d?new ag.BuiltinFunc(d.parameters,d.body,b):new ag.Err("Identifier not found: ".concat(a.value),a)},b1=function(a,b){for(var c=b2(a,b);(0,r.Z)(c,ag.TailCallFunc);)c=b2(c.body.statements,c.environment);return c},b2=function(a,b){for(var c=ag.NIL,d=0;d<a.length;d++){var f=a[d];if(f.kind!==e.CommentStatement){if(f.kind===e.Return&&f.returnValue.kind===e.CallExpression){var g=cf(f.returnValue.function,b);if((0,r.Z)(g,ag.Func))return new ag.TailCallFunc(g.parameters,g.body,b5(g,bX(f.returnValue.arguments,b)).environment)}if(d==a.length-1&&f.kind===e.ExpressionStatement&&f.expression.kind===e.CallExpression){var h=cf(f.expression.function,b);if((0,r.Z)(h,ag.Func))return new ag.TailCallFunc(h.parameters,h.body,b5(h,bX(f.expression.arguments,b)).environment)}if(c=cf(f,b),(0,r.Z)(c,ag.Err)||(0,r.Z)(c,ag.ReturnValue)||(0,r.Z)(c,ag.BreakValue))break}}return c},b3=function(a,b){var c=cf(a.condition,b);return bV(c)?c:c.isTruthy()?b2(a.consequence.statements,b):a.alternative?b2(a.alternative.statements,b):ag.NIL},b4=function(a,b){var c=cf(a.function,b);if(bV(c))return c;var d=bX(a.arguments,b);if(bV(d[0]))return d[0];var e=d.some(function(a){return(0,r.Z)(a,ag.Placeholder)});if((0,r.Z)(c,ag.Func)&&(d.length<c.parameters.length||e)){var f=b5(c,d),g=f.environment,h=f.parameters;return new ag.Func(h,c.body,g)}if((0,r.Z)(c,ag.BuiltinFunc)&&(d.length<c.parameters.length||e)){var i=b5(c,d),j=i.environment,k=i.parameters;return new ag.BuiltinFunc(k,c.body,j)}return b6(c,d)},b5=function(a,b){for(var c=new ag.Environment(a.environment),d=a.parameters,f=[],g=0;g<Math.min(d.length,b.length);g++)if(d[g].kind!==e.Placeholder){if((0,r.Z)(b[g],ag.Placeholder)){f.push(d[g]);continue}if(d[g].kind===e.Identifier){c.declareVariable(d[g].value,b[g],!1);continue}if(d[g].kind===e.ListDestructurePattern){cc(d[g],!1,b[g],c);continue}if(d[g].kind===e.RestElement){c.declareVariable(d[g].argument.value,new ag.List(b.slice(g)),!1);break}throw Error("Unable to parse parameter: ".concat(d[g].kind))}return{environment:c,parameters:(0,q.Z)(f).concat((0,q.Z)(d.slice(b.length)))}},b6=function(a,b){if((0,r.Z)(a,ag.Func)){var c,d=b5(a,b).environment;return c=cf(a.body,d),(0,r.Z)(c,ag.ReturnValue)?c.value:c}if((0,r.Z)(a,ag.BuiltinFunc)){var e=b5(a,b).environment;return a.body(e)}throw Error("Not a function: ".concat(a.inspect()))},b7=function(a,b){var c=cf(a.function,b);if(bV(c))return c;var d=bX(a.arguments,b);if(bV(d[0]))return d[0];var e=d.some(function(a){return(0,r.Z)(a,ag.Placeholder)});if((0,r.Z)(c,ag.Func)&&(d.length<c.parameters.length||e)){var f=b5(c,d),g=f.environment,h=f.parameters;return new ag.Func(h,c.body,g)}if((0,r.Z)(c,ag.BuiltinFunc)&&(d.length<c.parameters.length||e)){var i=b5(c,d),j=i.environment,k=i.parameters;return new ag.BuiltinFunc(k,c.body,j)}return b6(c,d)},b8=function(a,b){var c=cf(a.function,b);if(bV(c))return c;var d=cf(a.argument,b);return bV(d)?d:b6(c,[d])},b9=function(a,b){var c=cf(a.subject,b);if(bV(c))return c;var d=!0,f=!1,g=void 0;try{for(var h,i=a.cases[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){var j=h.value;if(j.pattern.kind===e.Identifier){var k=new ag.Environment(b);if(k.declareVariable(j.pattern.value,c,!1),j.guard){var l=cf(j.guard,k);if(bV(l))return l;if(!l.isTruthy())continue}return cf(j.consequence,k)}if(j.pattern.kind===e.Placeholder){if(j.guard){var m=cf(j.guard,b);if(bV(m))return m;if(!m.isTruthy())continue}return cf(j.consequence,b)}if(j.pattern.kind===e.ListMatchPattern){try{var n=new ag.Environment(b);if(ce(j.pattern,c,n),j.guard){var o=cf(j.guard,n);if(bV(o))return o;if(!o.isTruthy())continue}return cf(j.consequence,n)}catch(p){if((0,r.Z)(p,cd))continue;if(bV(p))return p;throw p}continue}var q=cf(j.pattern,b);if(bV(q))return q;if((0,r.Z)(q,ag.Range)){if(!q.includes(c).value)continue}else if(!c.equals(q))continue;if(j.guard){var s=cf(j.guard,b);if(bV(s))return s;if(!s.isTruthy())continue}return cf(j.consequence,b)}}catch(t){f=!0,g=t}finally{try{d||null==i.return||i.return()}finally{if(f)throw g}}return ag.NIL},ca=function(a,b){var c=cf(a.item,b);if(bV(c))return c;if(!c.get)return new ag.Err("This value is not indexable",a);var d=cf(a.index,b);return bV(d)?d:c.get(d)},cb=function(a,b){var c=cf(a.initial,b);if(bV(c))return c;var d=!0,e=!1,f=void 0;try{for(var g,h=a.functions[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=cf(i,b);if(bV(j))return j;if(c=b6(j,[c]),bV(c))break}}catch(k){e=!0,f=k}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c},cc=function(a,b,c,d){for(var f=a.elements,g=0;g<f.length;g++)if(f[g].kind!==e.Placeholder){if(f[g].kind===e.Identifier){d.declareVariable(f[g].value,c.get(new ag.Integer(g)),b);continue}if(f[g].kind===e.ListDestructurePattern){cc(f[g],b,c.get(new ag.Integer(g)),d);continue}if(f[g].kind===e.RestElement){d.declareVariable(f[g].argument.value,c.get(ag.Range.fromExclusiveRange(g,1/0,1)),b);break}throw Error("Unable to destructure list item: ".concat(f[g].kind))}return c},cd=function(a){(0,z.Z)(c,a);var b=(0,B.Z)(c);function c(){return(0,s.Z)(this,c),b.apply(this,arguments)}return c}((0,A.Z)(Error)),ce=function(a,b,c){var d=a.elements;if(!(0,r.Z)(b,ag.List))throw new cd;if(0!==d.length||0!==b.items.size){if(0===d.length&&b.items.size>0||d.length>0&&0===b.items.size)throw new cd;var f=0;for(f=0;f<d.length;f++){if(f>=b.items.size)throw new cd;if(d[f].kind!==e.Placeholder){if(d[f].kind===e.Identifier){c.declareVariable(d[f].value,b.get(new ag.Integer(f)),!1);continue}if(d[f].kind===e.ListMatchPattern){ce(d[f],b.get(new ag.Integer(f)),c);continue}if(d[f].kind===e.RestElement){c.declareVariable(d[f].argument.value,b.get(ag.Range.fromExclusiveRange(f,1/0,1)),!1);return}var g=cf(d[f],c);if(bV(g))throw Error(g);var h=b.get(new ag.Integer(f));if(!(0,r.Z)(g,ag.Range)||!g.includes(h).value){if(!b.get(new ag.Integer(f)).equals(g))throw new cd}}}if(f<b.items.size)throw new cd}},cf=function(a,b){try{switch(a.kind){case e.Program:return bW(a.statements,b);case e.Section:return b.addSection(a.name.value,new ag.Section(a.name,a.section,new ag.Environment(b),a.attributes));case e.Integer:return new ag.Integer(a.value);case e.Decimal:return new ag.Decimal(a.value);case e.Bool:return a.value?ag.TRUE:ag.FALSE;case e.Str:return new ag.Str(a.value);case e.Placeholder:return ag.PLACEHOLDER;case e.Nil:return ag.NIL;case e.ListExpression:return bY(a,b);case e.DictionaryExpression:return bZ(a,b);case e.SetExpression:return b$(a,b);case e.RangeExpression:return b_(a,b);case e.IndexExpression:return ca(a,b);case e.FunctionLiteral:return new ag.Func(a.parameters,a.body,new ag.Environment(b));case e.Return:var c,d,f=cf(a.returnValue,b);return bV(f)?f:new ag.ReturnValue(f);case e.Break:var g=a.value?cf(a.value,b):ag.NIL;return bV(g)?g:new ag.BreakValue(g);case e.Let:var h=cf(a.value,b);if(bV(h))return h;if(a.name.kind===e.ListDestructurePattern)return cc(a.name,a.isMutable,h,b);return(0,r.Z)(h,ag.Func)&&h.environment.declareVariable(a.name.value,h,!1),b.declareVariable(a.name.value,h,a.isMutable);case e.Assignment:var i=cf(a.value,b);if(bV(i))return i;return b.setVariable(a.name.value,i);case e.Identifier:return b0(a,b);case e.BlockStatement:return b1(a.statements,b);case e.ExpressionStatement:return cf(a.expression,b);case e.IfExpression:return b3(a,b);case e.CallExpression:return b4(a,b);case e.InfixExpression:return b7(a,b);case e.PrefixExpression:return b8(a,b);case e.MatchExpression:return b9(a,b);case e.FunctionThread:return cb(a,b);case e.FunctionComposition:return c=a,d=b,new ag.BuiltinFunc([{kind:e.Identifier,value:"a"},],function(a){var b=a.getVariable("a"),d=!0,e=!1,f=void 0;try{for(var g,h=c.functions[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=cf(i,a);if(bV(j))return j;if(b=b6(j,[b]),bV(b))break}}catch(k){e=!0,f=k}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return b},d);case e.SpreadElement:return cf(a.value,b);default:return new ag.Err("Unknown node type: ".concat(a.kind),a)}}catch(j){return new ag.Err(j.message,a)}},cg=function(a,b){var c;return c=cf(a,b),(0,r.Z)(c,ag.ReturnValue)?c.value:c},ch=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:null,d=new ag.Environment(b);c&&d.declareVariable("input",c,!1);var e=cg(a.section,d);if((0,r.Z)(e,ag.Err))throw{message:e.inspect(),line:e.node.source.line,column:e.node.source.column};return e},ci=function(a,b){var c,d=new w(a);try{c=new D(d).parse()}catch(e){throw{message:"Parser error: ".concat(e.message),line:e.token.line,column:e.token.column}}var f=new ag.Environment;f.setIO(b);var g=cg(c,f);if((0,r.Z)(g,ag.Err))throw{message:g.inspect(),line:g.node.source.line,column:g.node.source.column};var h=f.getSection("part_one"),i=f.getSection("part_two");if(0===h.length&&0===i.length)return{environment:f,result:g};if(h.length>1)throw{message:"Runtime error: Expected a single `part_one` section",line:h[1].name.source.line,column:h[1].name.source.column};if(i.length>1)throw{message:"Runtime error: Expected a single `part_two` section",line:i[1].name.source.line,column:i[1].name.source.column};return{environment:f,result:g,partOne:1===h.length?h[0]:void 0,partTwo:1===i.length?i[0]:void 0}},cj=function(a,b){var c,d,e=new Date().getTime(),f=ci(a,b),g=f.environment,h=f.result,i=f.partOne,j=f.partTwo;if(!i&&!j)return{value:h.inspect(),duration:new Date().getTime()-e};var k=g.getSection("input");if(k.length>1)throw{message:"Runtime error: Expected a single `input` section",line:k[1].name.source.line,column:k[1].name.source.column};var l=1===k.length?cg(k[0].section,g):null;if((0,r.Z)(l,ag.Err))throw{message:l.inspect(),line:l.node.source.line,column:l.node.source.column};if(i){var m=new Date().getTime();c={value:ch(i,g,l).inspect(),duration:new Date().getTime()-m}}if(j){var n=new Date().getTime();d={value:ch(j,g,l).inspect(),duration:new Date().getTime()-n}}return{partOne:c,partTwo:d}},ck=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]&&arguments[2],d=ci(a,b),e=d.environment,f=d.partOne,g=d.partTwo,h=[],i=!0,j=!1,k=void 0;try{for(var l,m=e.getSection("test")[Symbol.iterator]();!(i=(l=m.next()).done);i=!0){var n=l.value,o=n.hasAttribute("slow");if(!o||c){var p=new ag.Environment(e),q=cg(n.section,p);if((0,r.Z)(q,ag.Err))throw{message:q.inspect(),line:q.node.source.line,column:q.node.source.column};var s=p.getSection("part_one"),t=p.getSection("part_two");if(0!==s.length||0!==t.length){if(s.length>1)throw{message:"Runtime error: Expected a single testcase `part_one` section",line:s[1].name.source.line,column:s[1].name.source.column};if(t.length>1)throw{message:"Runtime error: Expected a single testcase `part_two` section",line:t[1].name.source.line,column:t[1].name.source.column};var u=p.getSection("input");if(u.length>1)throw{message:"Runtime error: Expected a single testcase `input` section",line:u[1].name.source.line,column:u[1].name.source.column};var v=1===u.length?ch(u[0],p):null,w={slow:o};if(f&&1===s.length){var x=ch(s[0],p),y=ch(f,p,v);w.partOne={expected:x.inspect(),actual:y.inspect(),hasPassed:x.equals(y)}}if(g&&1===t.length){var z=ch(t[0],p),A=ch(g,p,v);w.partTwo={expected:z.inspect(),actual:A.inspect(),hasPassed:z.equals(A)}}h.push(w)}}}}catch(B){j=!0,k=B}finally{try{i||null==m.return||m.return()}finally{if(j)throw k}}return h},cl={input:function(a){var b=new URL(a);if("aoc:"===b.protocol){var c,d=b.host,e=b.pathname.substring(1);d||(d=(c=(0,p.Z)(b.pathname.substring(2).split("/"),2))[0],e=c[1]),a="https://raw.githubusercontent.com/eddmann/advent-of-code/master/".concat(d,"/santa-lang/aoc").concat(d,"_day").concat(e.padStart(2,"0"),".input")}var f=new XMLHttpRequest;return f.open("GET",a,!1),f.send(null),f.responseText.trimEnd()},output:function(a){return(g=console).log.apply(g,(0,q.Z)(a))}};addEventListener("message",function(a){var b=a.data;try{switch(b.type){case"run":postMessage({type:"run",result:cj(a.data.source,cl)});return;case"test":postMessage({type:"test",testCases:ck(a.data.source,cl)});return;case"tokenize":postMessage({type:"tokenize",tokens:[]});return;case"parse":postMessage({type:"parse",ast:{}});return}}catch(c){postMessage({type:b.type,source:b.source,error:c})}})}},i={};function j(a){var b=i[a];if(void 0!==b)return b.exports;var c=i[a]={exports:{}},d=!0;try{h[a](c,c.exports,j),d=!1}finally{d&&delete i[a]}return c.exports}j.m=h,j.x=function(){var a=j.O(void 0,[678,840],function(){return j(3460)});return j.O(a)},a=[],j.O=function(b,c,d,e){if(c){e=e||0;for(var f=a.length;f>0&&a[f-1][2]>e;f--)a[f]=a[f-1];a[f]=[c,d,e];return}for(var g=1/0,f=0;f<a.length;f++){for(var c=a[f][0],d=a[f][1],e=a[f][2],h=!0,i=0;i<c.length;i++)g>=e&&Object.keys(j.O).every(function(a){return j.O[a](c[i])})?c.splice(i--,1):(h=!1,e<g&&(g=e));if(h){a.splice(f--,1);var k=d();void 0!==k&&(b=k)}}return b},j.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return j.d(b,{a:b}),b},j.d=function(a,b){for(var c in b)j.o(b,c)&&!j.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},j.f={},j.e=function(a){return Promise.all(Object.keys(j.f).reduce(function(b,c){return j.f[c](a,b),b},[]))},j.u=function(a){return"static/chunks/"+(678===a?"d53b377f":a)+"."+({"678":"6acee495b7fa82e3","840":"a6fecdc45184e297"})[a]+".js"},j.miniCssF=function(a){},j.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},j.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},j.tt=function(){return void 0===b&&(b={createScriptURL:function(a){return a}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(b=trustedTypes.createPolicy("nextjs#bundler",b))),b},j.tu=function(a){return j.tt().createScriptURL(a)},j.p="/santa-lang-ts//_next/",c={460:1},d=function(a){var b=a[0],d=a[1],e=a[2];for(var g in d)j.o(d,g)&&(j.m[g]=d[g]);for(e&&e(j);b.length;)c[b.pop()]=1;f(a)},j.f.i=function(a,b){c[a]||importScripts(j.tu(j.p+j.u(a)))},f=(e=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(e),e.push=d,g=j.x,j.x=function(){return Promise.all([j.e(678),j.e(840)]).then(g)},_N_E=j.x()}()